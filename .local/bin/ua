#!/bin/sh

# Unarchive
# Features smart extract here when archive contains a single file
for a in "$@"
do
	[ -f "$a" ] || break
	if [ "$(bsdtar -tf "$a" | sed '/.*\/./d' | wc -l)" -lt 2 ]
	then
		bsdtar -xf "$a" || return 1
	else
		BN=$(basename "$a")
		EXT=${BN##*.}
		DN=$(basename -s ."$EXT" "$BN")
		mkdir "$DN" || return 1
		bsdtar -xf "$a" -C "$DN" || return 1
	fi
	rm "$a"
done
